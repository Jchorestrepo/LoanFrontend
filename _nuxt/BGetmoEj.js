import{_ as c}from"./DlAUqK2U.js";import{c as i,a as t,t as n,F as u,m as h,o as d}from"./C6ViOGLp.js";const m={data(){return{totalLoans:0,totalPaidLoans:0,totalActiveLoans:0,totalOverdueLoans:0,totalLent:0,totalInterestsCollected:0,walletSummaries:[]}},async mounted(){try{const o=await(await fetch("https://apiloan-zkmh.onrender.com/api/loan")).json();console.log("Datos recibidos:",o),this.totalLoans=o.length,this.totalPaidLoans=o.filter(s=>s.status==="Pagado").length,this.totalActiveLoans=o.filter(s=>s.status==="Activo").length,this.totalOverdueLoans=o.filter(s=>s.status==="Vencido").length,this.totalLent=o.reduce((s,a)=>s+Number(a.montoInicial||0),0),this.totalInterestsCollected=o.reduce((s,a)=>s+Number(a.abonos||0),0);const e={};o.forEach(s=>{e[s.wallet]||(e[s.wallet]={_id:s.wallet,totalLoans:0,totalAmount:0,totalInterests:0}),e[s.wallet].totalLoans+=1,e[s.wallet].totalAmount+=Number(s.montoInicial||0),e[s.wallet].totalInterests+=Number(s.abonos||0)}),this.walletSummaries=Object.values(e),console.log("Estado actualizado:",{totalLoans:this.totalLoans,totalPaidLoans:this.totalPaidLoans,totalActiveLoans:this.totalActiveLoans,totalOverdueLoans:this.totalOverdueLoans,totalLent:this.totalLent,totalInterestsCollected:this.totalInterestsCollected,walletSummaries:this.walletSummaries})}catch(r){console.log("Error al obtener los datos:",r)}}},p={class:"space-y-6"},_={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},g={class:"bg-dark-surface rounded-lg p-6 shadow-lg"},v={class:"text-3xl font-bold mt-4"},b={class:"bg-dark-surface rounded-lg p-6 shadow-lg"},f={class:"text-3xl font-bold mt-4"},w={class:"bg-dark-surface rounded-lg shadow-lg"},L={class:"p-6"},x={class:"overflow-x-auto"},y={class:"w-full"},k={class:"divide-y divide-gray-700"},I={class:"py-3"},A={class:"py-3"},P={class:"py-3"},C={class:"py-3"},S={class:"py-3"};function $(r,o,e,s,a,j){return d(),i("div",p,[t("div",_,[t("div",g,[o[0]||(o[0]=t("div",{class:"flex justify-between items-center"},[t("h3",{class:"text-gray-400"},"Total PrÃ©stamos"),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("p",v,"$"+n(a.totalLoans),1)]),t("div",b,[o[1]||(o[1]=t("div",{class:"flex justify-between items-center"},[t("h3",{class:"text-gray-400"},"Total Prestado"),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"})],-1)),t("p",f,"$"+n(a.totalLent),1)])]),t("div",w,[t("div",L,[o[3]||(o[3]=t("h2",{class:"text-xl font-semibold mb-4"},"Resumen por Wallet",-1)),t("div",x,[t("table",y,[o[2]||(o[2]=t("thead",null,[t("tr",{class:"text-left text-gray-400 border-b border-gray-700"},[t("th",{class:"pb-3"},"Wallet"),t("th",{class:"pb-3"},"Activos"),t("th",{class:"pb-3"},"Prestado"),t("th",{class:"pb-3"},"Intereses"),t("th",{class:"pb-3"},"Total")])],-1)),t("tbody",k,[(d(!0),i(u,null,h(a.walletSummaries,l=>(d(),i("tr",{key:l._id,class:"text-gray-300"},[t("td",I,n(l._id),1),t("td",A,n(l.totalLoans),1),t("td",P,"$"+n(l.totalAmount),1),t("td",C,"$"+n(l.totalInterests),1),t("td",S,"$"+n(l.totalInterests+l.totalAmount),1)]))),128))])])])])])])}const O=c(m,[["render",$]]);export{O as default};
